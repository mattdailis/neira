import{n as se,i as et,d as De,e as Je,s as tt,r as lt,f as he,g as We}from"../chunks/scheduler.B7PGr4mf.js";import{C as st,D as nt,E as it,F as ot,S as rt,i as at,e as B,s as U,c as T,k as H,g as ue,a as j,f as E,b as L,q as Z,d as G,m as b,B as _e,p as Me,t as Se,h as Be,A as ve,j as z,l as F,n as X,G as Ye,H as Qe,r as Te}from"../chunks/index.tVoUV_k3.js";import{e as Q,u as Ie,f as Ve}from"../chunks/each.BU099SsM.js";function Xe(s,e,t,l){if(!e)return se;const n=s.getBoundingClientRect();if(e.left===n.left&&e.right===n.right&&e.top===n.top&&e.bottom===n.bottom)return se;const{delay:i=0,duration:v=300,easing:o=et,start:u=st()+i,end:m=u+v,tick:w=se,css:g}=t(s,{from:e,to:n},l);let y=!0,a=!1,I;function p(){g&&(I=it(s,0,1,v,i,o,g)),i||(a=!0)}function c(){g&&ot(s,I),y=!1}return nt(q=>{if(!a&&q>=u&&(a=!0),a&&q>=m&&(w(1,0),c()),!y)return!1;if(a){const S=q-u,h=0+1*o(S/v);w(h,1-h)}return!0}),p(),w(0,1),c}function Ze(s){const e=getComputedStyle(s);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,n=s.getBoundingClientRect();s.style.position="absolute",s.style.width=t,s.style.height=l,me(s,n)}}function me(s,e){const t=s.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(s),n=l.transform==="none"?"":l.transform;s.style.transform=`${n} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function $e(s){const e=s-1;return e*e*e+1}function ct(s){return--s*s*s*s*s+1}function ft({fallback:s,...e}){const t=new Map,l=new Map;function n(v,o,u){const{delay:m=0,duration:w=O=>Math.sqrt(O)*30,easing:g=$e}=De(De({},e),u),y=v.getBoundingClientRect(),a=o.getBoundingClientRect(),I=y.left-a.left,p=y.top-a.top,c=y.width/a.width,q=y.height/a.height,S=Math.sqrt(I*I+p*p),h=getComputedStyle(o),D=h.transform==="none"?"":h.transform,C=+h.opacity;return{delay:m,duration:Je(w)?w(S):w,easing:g,css:(O,K)=>`
				opacity: ${O*C};
				transform-origin: top left;
				transform: ${D} translate(${K*I}px,${K*p}px) scale(${O+(1-O)*c}, ${O+(1-O)*q});
			`}}function i(v,o,u){return(m,w)=>(v.set(w.key,m),()=>{if(o.has(w.key)){const g=o.get(w.key);return o.delete(w.key),n(g,m,w)}return v.delete(w.key),s&&s(m,w,u)})}return[i(l,t,!1),i(t,l,!0)]}function xe(s,{from:e,to:t},l={}){const n=getComputedStyle(s),i=n.transform==="none"?"":n.transform,[v,o]=n.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*v/t.width-(t.left+v),m=e.top+e.height*o/t.height-(t.top+o),{delay:w=0,duration:g=a=>Math.sqrt(a)*120,easing:y=$e}=l;return{delay:w,duration:Je(g)?g(Math.sqrt(u*u+m*m)):g,easing:y,css:(a,I)=>{const p=I*u,c=I*m,q=a+I*e.width/t.width,S=a+I*e.height/t.height;return`transform: ${i} translate(${p}px, ${c}px) scale(${q}, ${S});`}}}function He(s,e,t){const l=s.slice();return l[23]=e[t],l}function Oe(s,e,t){const l=s.slice();return l[26]=e[t],l}function qe(s,e,t){const l=s.slice();return l[23]=e[t],l}function Le(s,e,t){const l=s.slice();return l[31]=e[t],l}function Re(s,e,t){const l=s.slice();return l[31]=e[t],l}function Ne(s,e){let t,l=e[31].description+"",n,i,v,o,u,m,w=se,g,y,a;function I(...p){return e[9](e[31],...p)}return{key:s,first:null,c(){t=B("div"),n=z(l),i=U(),this.h()},l(p){t=T(p,"DIV",{class:!0});var c=H(t);n=F(c,l),i=j(c),c.forEach(E),this.h()},h(){L(t,"class",v=he("item"+(e[2]&&e[2][0].id==e[31].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[31].id?" secondaryselect":""))+" svelte-1t9tu6c"),this.first=t},m(p,c){G(p,t,c),b(t,n),b(t,i),g=!0,y||(a=_e(t,"click",I),y=!0)},p(p,c){e=p,(!g||c[0]&1)&&l!==(l=e[31].description+"")&&X(n,l),(!g||c[0]&5&&v!==(v=he("item"+(e[2]&&e[2][0].id==e[31].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[31].id?" secondaryselect":""))+" svelte-1t9tu6c"))&&L(t,"class",v)},r(){m=t.getBoundingClientRect()},f(){Ze(t),w(),me(t,m)},a(){w(),w=Xe(t,m,xe,{})},i(p){g||(p&&We(()=>{g&&(u&&u.end(1),o=Ye(t,e[5],{key:e[31].id}),o.start())}),g=!0)},o(p){o&&o.invalidate(),p&&(u=Qe(t,e[4],{key:e[31].id})),g=!1},d(p){p&&E(t),p&&u&&u.end(),y=!1,a()}}}function Ae(s,e){let t,l=e[31].description+"",n,i,v,o,u,m,w=se,g,y,a;function I(...p){return e[10](e[31],...p)}return{key:s,first:null,c(){t=B("div"),n=z(l),i=U(),this.h()},l(p){t=T(p,"DIV",{class:!0});var c=H(t);n=F(c,l),i=j(c),c.forEach(E),this.h()},h(){L(t,"class",v=he("item"+(e[2]&&e[2][0].id==e[31].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[31].id?" secondaryselect":""))+" svelte-1t9tu6c"),this.first=t},m(p,c){G(p,t,c),b(t,n),b(t,i),g=!0,y||(a=_e(t,"click",I),y=!0)},p(p,c){e=p,(!g||c[0]&2)&&l!==(l=e[31].description+"")&&X(n,l),(!g||c[0]&6&&v!==(v=he("item"+(e[2]&&e[2][0].id==e[31].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[31].id?" secondaryselect":""))+" svelte-1t9tu6c"))&&L(t,"class",v)},r(){m=t.getBoundingClientRect()},f(){Ze(t),w(),me(t,m)},a(){w(),w=Xe(t,m,xe,{})},i(p){g||(p&&We(()=>{g&&(u&&u.end(1),o=Ye(t,e[5],{key:e[31].id}),o.start())}),g=!0)},o(p){o&&o.invalidate(),p&&(u=Qe(t,e[4],{key:e[31].id})),g=!1},d(p){p&&E(t),p&&u&&u.end(),y=!1,a()}}}function Pe(s){let e,t="<i>No schools have been selected</i>";return{c(){e=B("p"),e.innerHTML=t,this.h()},l(l){e=T(l,"P",{style:!0,"data-svelte-h":!0}),ue(e)!=="svelte-4pzh4c"&&(e.innerHTML=t),this.h()},h(){Z(e,"color","gray")},m(l,n){G(l,e,n)},d(l){l&&E(e)}}}function Ue(s){let e,t=s[2][0].description+"",l,n,i,v=s[2][0].description+"",o,u,m=s[3].filter(s[11]).length+"",w,g,y=new Set(s[3].filter(s[12]).flatMap(Ke)).size-1+"",a,I,p,c,q=Q(s[3].filter(s[13])),S=[];for(let h=0;h<q.length;h+=1)S[h]=je(qe(s,q,h));return{c(){e=B("h2"),l=z(t),n=U(),i=B("p"),o=z(v),u=z(" has raced "),w=z(m),g=z(" times this season against "),a=z(y),I=z(" unique opponents."),p=U(),c=B("ul");for(let h=0;h<S.length;h+=1)S[h].c();this.h()},l(h){e=T(h,"H2",{class:!0});var D=H(e);l=F(D,t),D.forEach(E),n=j(h),i=T(h,"P",{});var C=H(i);o=F(C,v),u=F(C," has raced "),w=F(C,m),g=F(C," times this season against "),a=F(C,y),I=F(C," unique opponents."),C.forEach(E),p=j(h),c=T(h,"UL",{});var O=H(c);for(let K=0;K<S.length;K+=1)S[K].l(O);O.forEach(E),this.h()},h(){L(e,"class","svelte-1t9tu6c")},m(h,D){G(h,e,D),b(e,l),G(h,n,D),G(h,i,D),b(i,o),b(i,u),b(i,w),b(i,g),b(i,a),b(i,I),G(h,p,D),G(h,c,D);for(let C=0;C<S.length;C+=1)S[C]&&S[C].m(c,null)},p(h,D){if(D[0]&4&&t!==(t=h[2][0].description+"")&&X(l,t),D[0]&4&&v!==(v=h[2][0].description+"")&&X(o,v),D[0]&4&&m!==(m=h[3].filter(h[11]).length+"")&&X(w,m),D[0]&4&&y!==(y=new Set(h[3].filter(h[12]).flatMap(Ke)).size-1+"")&&X(a,y),D[0]&12){q=Q(h[3].filter(h[13]));let C;for(C=0;C<q.length;C+=1){const O=qe(h,q,C);S[C]?S[C].p(O,D):(S[C]=je(O),S[C].c(),S[C].m(c,null))}for(;C<S.length;C+=1)S[C].d(1);S.length=q.length}},d(h){h&&(E(e),E(n),E(i),E(p),E(c)),ve(S,h)}}}function je(s){let e,t=s[23]+"",l;return{c(){e=B("li"),l=z(t)},l(n){e=T(n,"LI",{});var i=H(e);l=F(i,t),i.forEach(E)},m(n,i){G(n,e,i),b(e,l)},p(n,i){i[0]&4&&t!==(t=n[23]+"")&&X(l,t)},d(n){n&&E(e)}}}function ze(s){let e,t=s[2][0].description+"",l,n,i=s[2][1].description+"",v;return{c(){e=B("h2"),l=z(t),n=z(" vs "),v=z(i),this.h()},l(o){e=T(o,"H2",{class:!0});var u=H(e);l=F(u,t),n=F(u," vs "),v=F(u,i),u.forEach(E),this.h()},h(){L(e,"class","svelte-1t9tu6c")},m(o,u){G(o,e,u),b(e,l),b(e,n),b(e,v)},p(o,u){u[0]&4&&t!==(t=o[2][0].description+"")&&X(l,t),u[0]&4&&i!==(i=o[2][1].description+"")&&X(v,i)},d(o){o&&E(e)}}}function Fe(s){let e,t=s[26]+"",l;return{c(){e=B("td"),l=z(t),this.h()},l(n){e=T(n,"TD",{class:!0});var i=H(e);l=F(i,t),i.forEach(E),this.h()},h(){L(e,"class","svelte-1t9tu6c")},m(n,i){G(n,e,i),b(e,l)},p:se,d(n){n&&E(e)}}}function Ge(s){let e,t,l=Q(s[23]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Fe(Oe(s,l,i));return{c(){e=B("tr");for(let i=0;i<n.length;i+=1)n[i].c();t=U()},l(i){e=T(i,"TR",{});var v=H(e);for(let o=0;o<n.length;o+=1)n[o].l(v);t=j(v),v.forEach(E)},m(i,v){G(i,e,v);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);b(e,t)},p(i,v){if(v[0]&8){l=Q(i[23]);let o;for(o=0;o<l.length;o+=1){const u=Oe(i,l,o);n[o]?n[o].p(u,v):(n[o]=Fe(u),n[o].c(),n[o].m(e,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&E(e),ve(n,i)}}}function dt(s){let e,t,l,n,i,v="Unseeded",o,u,m=[],w=new Map,g,y,a,I="Seeding",p,c=[],q=new Map,S,h,D,C,O,K,W,$,r,_,M,V,Y='<tr class="headerrow svelte-1t9tu6c"><td class="svelte-1t9tu6c">Faster School</td> <td class="svelte-1t9tu6c">Slower School</td> <td class="svelte-1t9tu6c">Margin</td> <td class="svelte-1t9tu6c">Date</td></tr>',ge,ee,oe,pe,ye,ne=Q(s[0]);const ke=f=>f[31].id;for(let f=0;f<ne.length;f+=1){let k=Re(s,ne,f),d=ke(k);w.set(d,m[f]=Ne(d,k))}let ie=Q(s[1]);const be=f=>f[31].id;for(let f=0;f<ie.length;f+=1){let k=Le(s,ie,f),d=be(k);q.set(d,c[f]=Ae(d,k))}let P=s[2].length==0&&Pe(),N=s[2].length==1&&Ue(s),A=s[2].length==2&&ze(s),te=Q(s[3]),R=[];for(let f=0;f<te.length;f+=1)R[f]=Ge(He(s,te,f));return{c(){e=B("div"),t=B("div"),l=B("div"),n=B("div"),i=B("h2"),i.textContent=v,o=U(),u=B("div");for(let f=0;f<m.length;f+=1)m[f].c();g=U(),y=B("div"),a=B("h2"),a.textContent=I,p=U();for(let f=0;f<c.length;f+=1)c[f].c();S=U(),h=B("div"),D=B("div"),P&&P.c(),C=U(),N&&N.c(),O=U(),A&&A.c(),K=U(),W=B("div"),$=B("input"),r=U(),_=B("div"),M=B("table"),V=B("thead"),V.innerHTML=Y,ge=U(),ee=B("tbody");for(let f=0;f<R.length;f+=1)R[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0,style:!0});var k=H(e);t=T(k,"DIV",{class:!0,style:!0});var d=H(t);l=T(d,"DIV",{class:!0});var x=H(l);n=T(x,"DIV",{class:!0});var re=H(n);i=T(re,"H2",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-1rh5f2t"&&(i.textContent=v),o=j(re),u=T(re,"DIV",{style:!0});var we=H(u);for(let J=0;J<m.length;J+=1)m[J].l(we);we.forEach(E),re.forEach(E),g=j(x),y=T(x,"DIV",{class:!0});var ae=H(y);a=T(ae,"H2",{class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-1ga4heb"&&(a.textContent=I),p=j(ae);for(let J=0;J<c.length;J+=1)c[J].l(ae);ae.forEach(E),x.forEach(E),d.forEach(E),S=j(k),h=T(k,"DIV",{class:!0});var ce=H(h);D=T(ce,"DIV",{class:!0});var le=H(D);P&&P.l(le),C=j(le),N&&N.l(le),O=j(le),A&&A.l(le),le.forEach(E),K=j(ce),W=T(ce,"DIV",{class:!0});var fe=H(W);$=T(fe,"INPUT",{placeholder:!0}),r=j(fe),_=T(fe,"DIV",{class:!0,style:!0});var Ce=H(_);M=T(Ce,"TABLE",{style:!0});var de=H(M);V=T(de,"THEAD",{"data-svelte-h":!0}),ue(V)!=="svelte-iodkgz"&&(V.innerHTML=Y),ge=j(de),ee=T(de,"TBODY",{});var Ee=H(ee);for(let J=0;J<R.length;J+=1)R[J].l(Ee);Ee.forEach(E),de.forEach(E),Ce.forEach(E),fe.forEach(E),ce.forEach(E),k.forEach(E),this.h()},h(){L(i,"class","svelte-1t9tu6c"),Z(u,"height","100%"),Z(u,"overflow-y","scroll"),L(n,"class","left"),L(a,"class","svelte-1t9tu6c"),L(y,"class","right"),L(l,"class","board svelte-1t9tu6c"),L(t,"class","w3-col s4"),Z(t,"justify-content","left"),L(D,"class","selectionpane svelte-1t9tu6c"),L($,"placeholder","filter"),Z(M,"border-collapse","collapse"),L(_,"class","researchtable svelte-1t9tu6c"),Z(_,"height","90%"),L(W,"class","researchpane svelte-1t9tu6c"),L(h,"class","w3-col s8"),L(e,"class","w3-row-padding w3-margin-bottom toplevel svelte-1t9tu6c"),Z(e,"height","90vh"),Z(e,"overflow","hidden")},m(f,k){G(f,e,k),b(e,t),b(t,l),b(l,n),b(n,i),b(n,o),b(n,u);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(u,null);b(l,g),b(l,y),b(y,a),b(y,p);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(y,null);b(e,S),b(e,h),b(h,D),P&&P.m(D,null),b(D,C),N&&N.m(D,null),b(D,O),A&&A.m(D,null),b(h,K),b(h,W),b(W,$),b(W,r),b(W,_),b(_,M),b(M,V),b(M,ge),b(M,ee);for(let d=0;d<R.length;d+=1)R[d]&&R[d].m(ee,null);oe=!0,pe||(ye=[_e(window,"keydown",s[7]),_e($,"keydown",s[14])],pe=!0)},p(f,k){if(k[0]&5){ne=Q(f[0]),Te();for(let d=0;d<m.length;d+=1)m[d].r();m=Ie(m,k,ke,1,f,ne,w,u,Ve,Ne,null,Re);for(let d=0;d<m.length;d+=1)m[d].a();Me()}if(k[0]&6){ie=Q(f[1]),Te();for(let d=0;d<c.length;d+=1)c[d].r();c=Ie(c,k,be,1,f,ie,q,y,Ve,Ae,null,Le);for(let d=0;d<c.length;d+=1)c[d].a();Me()}if(f[2].length==0?P||(P=Pe(),P.c(),P.m(D,C)):P&&(P.d(1),P=null),f[2].length==1?N?N.p(f,k):(N=Ue(f),N.c(),N.m(D,O)):N&&(N.d(1),N=null),f[2].length==2?A?A.p(f,k):(A=ze(f),A.c(),A.m(D,null)):A&&(A.d(1),A=null),k[0]&8){te=Q(f[3]);let d;for(d=0;d<te.length;d+=1){const x=He(f,te,d);R[d]?R[d].p(x,k):(R[d]=Ge(x),R[d].c(),R[d].m(ee,null))}for(;d<R.length;d+=1)R[d].d(1);R.length=te.length}},i(f){if(!oe){for(let k=0;k<ne.length;k+=1)Se(m[k]);for(let k=0;k<ie.length;k+=1)Se(c[k]);oe=!0}},o(f){for(let k=0;k<m.length;k+=1)Be(m[k]);for(let k=0;k<c.length;k+=1)Be(c[k]);oe=!1},d(f){f&&E(e);for(let k=0;k<m.length;k+=1)m[k].d();for(let k=0;k<c.length;k+=1)c[k].d();P&&P.d(),N&&N.d(),A&&A.d(),ve(R,f),pe=!1,lt(ye)}}}const Ke=s=>[s[0],s[1]];function ut(s,e,t){let{data:l}=e,n=l.races,v=[...l.foundersDay];for(const[r,_]of Object.entries(n)){if(_.heats===void 0){console.log({race:_});continue}for(const M of _.heats)if(M.class==="fours"&&M.gender==="girls"&&M.varsity_index==="1")for(let V=0;V<M.results.length-1;V++)for(let Y=V+1;Y<M.results.length;Y++)v.push([M.results[V].school,M.results[Y].school,Math.round(100*(M.results[Y].margin_from_winner-M.results[V].margin_from_winner))/100,_.day])}v.sort((r,_)=>(r=r[3],_=_[3],-(r<_?-1:r>_?1:0)));const[o,u]=ft({duration:r=>Math.sqrt(r*200),fallback(r,_){const M=getComputedStyle(r),V=M.transform==="none"?"":M.transform;return{duration:600,easing:ct,css:Y=>`
					transform: ${V} scale(${Y});
					opacity: ${Y}
				`}}});let m=1,g=["Nobles","Groton","Brooks","BB&N","Middlesex","Taft","Cambridge RLS","Choate","Hopkins","Winsor","Frederick Gunn","Miss Porter's","Brewster Academy","Canterbury","Greenwich Academy","Lyme/Old Lyme","St. Mark's","NMH","Berkshire Academy","Newton Country Day","Pomfret"].map(r=>({id:m++,description:r})),y=[],a=[g[0]];function I(r){const _={id:m++,done:!1,seeded:!1,description:r.value};todos=[_,...todos],r.value=""}function p(r,_){return _<=0?r:(r===void 0&&console.error("wat"),[...r.slice(0,_-1),a[0],r[_-1],...r.slice(_+1)])}function c(r,_){return _>=r.length-1?r:[...r.slice(0,_),r[_+1],a[0],...r.slice(_+2)]}function q(r){console.log("moveToSeeding("+JSON.stringify(r)+")");let _={...a[0],seeded:!0},M=g.map(V=>V.id).indexOf(_.id);t(1,y=[...y.slice(0,M),_,...y.slice(M)]),t(0,g=g.filter(V=>V.id!=_.id)),t(2,a=[_])}function S(r){console.log("moveToUnseeded("+JSON.stringify(r)+")");let _={...a[0],seeded:!1},M=y.map(V=>V.id).indexOf(_.id);t(0,g=[...g.slice(0,M),_,...g.slice(M)]),t(1,y=y.filter(V=>V.id!=_.id)),t(2,a=[_])}function h(r){if(![38,40,37,39].includes(r.keyCode)){console.log(r.keyCode);return}if(r.preventDefault(),r.repeat||a.length!=1)return;let _=g.map(M=>M.id).indexOf(a[0].id);if(_<0)switch(_=y.map(M=>M.id).indexOf(a[0].id),r.keyCode){case 38:t(1,y=p(y,_));break;case 40:t(1,y=c(y,_));break;case 37:S(a[0]);break}else switch(r.keyCode){case 38:t(0,g=p(g,_));break;case 40:t(0,g=c(g,_));break;case 37:break;case 39:q(a[0]);break}}const D=(r,_)=>{_.shiftKey?t(2,a=[a[0],r]):t(2,a=[r])},C=(r,_)=>{_.shiftKey?t(2,a=[a[0],r]):t(2,a=[r])},O=r=>r.includes(a[0].description),K=r=>r.includes(a[0].description),W=r=>r.includes(a[0].description),$=r=>r.key==="Enter"&&I(r.target);return s.$$set=r=>{"data"in r&&t(8,l=r.data)},[g,y,a,v,o,u,I,h,l,D,C,O,K,W,$]}class pt extends rt{constructor(e){super(),at(this,e,ut,dt,tt,{data:8},null,[-1,-1])}}export{pt as component};
