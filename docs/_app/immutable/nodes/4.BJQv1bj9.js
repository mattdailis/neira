import{n as te,i as Ze,d as Ce,e as Fe,s as $e,r as xe,f as he,g as Ge}from"../chunks/scheduler.B7PGr4mf.js";import{C as et,D as tt,E as st,F as lt,S as nt,i as it,e as C,s as A,c as D,k as B,g as fe,a as P,f as w,b as S,q as z,d as W,m as k,B as ue,p as De,t as Ee,h as Me,A as Ke,j as Q,l as X,n as ne,G as ze,H as Je,r as Se}from"../chunks/index.tVoUV_k3.js";import{e as J,u as Be,f as Te}from"../chunks/each.BU099SsM.js";function We(n,e,t,s){if(!e)return te;const l=n.getBoundingClientRect();if(e.left===l.left&&e.right===l.right&&e.top===l.top&&e.bottom===l.bottom)return te;const{delay:i=0,duration:p=300,easing:r=Ze,start:h=et()+i,end:m=h+p,tick:b=te,css:_}=t(n,{from:e,to:l},s);let y=!0,f=!1,E;function v(){_&&(E=st(n,0,1,p,i,r,_)),i||(f=!0)}function u(){_&&lt(n,E),y=!1}return tt(N=>{if(!f&&N>=h&&(f=!0),f&&N>=m&&(b(1,0),u()),!y)return!1;if(f){const U=N-h,T=0+1*r(U/p);b(T,1-T)}return!0}),v(),b(0,1),u}function Ye(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:s}=e,l=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=s,ve(n,l)}}function ve(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const s=getComputedStyle(n),l=s.transform==="none"?"":s.transform;n.style.transform=`${l} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function Qe(n){const e=n-1;return e*e*e+1}function rt(n){return--n*n*n*n*n+1}function ot({fallback:n,...e}){const t=new Map,s=new Map;function l(p,r,h){const{delay:m=0,duration:b=L=>Math.sqrt(L)*30,easing:_=Qe}=Ce(Ce({},e),h),y=p.getBoundingClientRect(),f=r.getBoundingClientRect(),E=y.left-f.left,v=y.top-f.top,u=y.width/f.width,N=y.height/f.height,U=Math.sqrt(E*E+v*v),T=getComputedStyle(r),V=T.transform==="none"?"":T.transform,G=+T.opacity;return{delay:m,duration:Fe(b)?b(U):b,easing:_,css:(L,o)=>`
				opacity: ${L*G};
				transform-origin: top left;
				transform: ${V} translate(${o*E}px,${o*v}px) scale(${L+(1-L)*u}, ${L+(1-L)*N});
			`}}function i(p,r,h){return(m,b)=>(p.set(b.key,m),()=>{if(r.has(b.key)){const _=r.get(b.key);return r.delete(b.key),l(_,m,b)}return p.delete(b.key),n&&n(m,b,h)})}return[i(s,t,!1),i(t,s,!0)]}function Xe(n,{from:e,to:t},s={}){const l=getComputedStyle(n),i=l.transform==="none"?"":l.transform,[p,r]=l.transformOrigin.split(" ").map(parseFloat),h=e.left+e.width*p/t.width-(t.left+p),m=e.top+e.height*r/t.height-(t.top+r),{delay:b=0,duration:_=f=>Math.sqrt(f)*120,easing:y=Qe}=s;return{delay:b,duration:Fe(_)?_(Math.sqrt(h*h+m*m)):_,easing:y,css:(f,E)=>{const v=E*h,u=E*m,N=f+E*e.width/t.width,U=f+E*e.height/t.height;return`transform: ${i} translate(${v}px, ${u}px) scale(${N}, ${U});`}}}function Ve(n,e,t){const s=n.slice();return s[20]=e[t],s}function Ie(n,e,t){const s=n.slice();return s[23]=e[t],s}function He(n,e,t){const s=n.slice();return s[26]=e[t],s}function Oe(n,e,t){const s=n.slice();return s[26]=e[t],s}function Re(n,e){let t,s=e[26].description+"",l,i,p,r,h,m,b=te,_,y,f;function E(...v){return e[9](e[26],...v)}return{key:n,first:null,c(){t=C("div"),l=Q(s),i=A(),this.h()},l(v){t=D(v,"DIV",{class:!0});var u=B(t);l=X(u,s),i=P(u),u.forEach(w),this.h()},h(){S(t,"class",p=he("item"+(e[2]&&e[2][0].id==e[26].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[26].id?" secondaryselect":""))+" svelte-19jtajs"),this.first=t},m(v,u){W(v,t,u),k(t,l),k(t,i),_=!0,y||(f=ue(t,"click",E),y=!0)},p(v,u){e=v,(!_||u&1)&&s!==(s=e[26].description+"")&&ne(l,s),(!_||u&5&&p!==(p=he("item"+(e[2]&&e[2][0].id==e[26].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[26].id?" secondaryselect":""))+" svelte-19jtajs"))&&S(t,"class",p)},r(){m=t.getBoundingClientRect()},f(){Ye(t),b(),ve(t,m)},a(){b(),b=We(t,m,Xe,{})},i(v){_||(v&&Ge(()=>{_&&(h&&h.end(1),r=ze(t,e[5],{key:e[26].id}),r.start())}),_=!0)},o(v){r&&r.invalidate(),v&&(h=Je(t,e[4],{key:e[26].id})),_=!1},d(v){v&&w(t),v&&h&&h.end(),y=!1,f()}}}function qe(n,e){let t,s=e[26].description+"",l,i,p,r,h,m,b=te,_,y,f;function E(...v){return e[10](e[26],...v)}return{key:n,first:null,c(){t=C("div"),l=Q(s),i=A(),this.h()},l(v){t=D(v,"DIV",{class:!0});var u=B(t);l=X(u,s),i=P(u),u.forEach(w),this.h()},h(){S(t,"class",p=he("item"+(e[2]&&e[2][0].id==e[26].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[26].id?" secondaryselect":""))+" svelte-19jtajs"),this.first=t},m(v,u){W(v,t,u),k(t,l),k(t,i),_=!0,y||(f=ue(t,"click",E),y=!0)},p(v,u){e=v,(!_||u&2)&&s!==(s=e[26].description+"")&&ne(l,s),(!_||u&6&&p!==(p=he("item"+(e[2]&&e[2][0].id==e[26].id?" selected":"")+(e[2].length>1&&e[2][1].id==e[26].id?" secondaryselect":""))+" svelte-19jtajs"))&&S(t,"class",p)},r(){m=t.getBoundingClientRect()},f(){Ye(t),b(),ve(t,m)},a(){b(),b=We(t,m,Xe,{})},i(v){_||(v&&Ge(()=>{_&&(h&&h.end(1),r=ze(t,e[5],{key:e[26].id}),r.start())}),_=!0)},o(v){r&&r.invalidate(),v&&(h=Je(t,e[4],{key:e[26].id})),_=!1},d(v){v&&w(t),v&&h&&h.end(),y=!1,f()}}}function Le(n){let e,t="<i>No schools have been selected</i>";return{c(){e=C("p"),e.innerHTML=t,this.h()},l(s){e=D(s,"P",{style:!0,"data-svelte-h":!0}),fe(e)!=="svelte-4pzh4c"&&(e.innerHTML=t),this.h()},h(){z(e,"color","gray")},m(s,l){W(s,e,l)},d(s){s&&w(e)}}}function Ne(n){let e,t=n[2][0].description+"",s;return{c(){e=C("h2"),s=Q(t),this.h()},l(l){e=D(l,"H2",{class:!0});var i=B(e);s=X(i,t),i.forEach(w),this.h()},h(){S(e,"class","svelte-19jtajs")},m(l,i){W(l,e,i),k(e,s)},p(l,i){i&4&&t!==(t=l[2][0].description+"")&&ne(s,t)},d(l){l&&w(e)}}}function Ae(n){let e,t=n[2][0].description+"",s,l,i=n[2][1].description+"",p;return{c(){e=C("h2"),s=Q(t),l=Q(" vs "),p=Q(i),this.h()},l(r){e=D(r,"H2",{class:!0});var h=B(e);s=X(h,t),l=X(h," vs "),p=X(h,i),h.forEach(w),this.h()},h(){S(e,"class","svelte-19jtajs")},m(r,h){W(r,e,h),k(e,s),k(e,l),k(e,p)},p(r,h){h&4&&t!==(t=r[2][0].description+"")&&ne(s,t),h&4&&i!==(i=r[2][1].description+"")&&ne(p,i)},d(r){r&&w(e)}}}function Pe(n){let e,t=n[23]+"",s;return{c(){e=C("td"),s=Q(t),this.h()},l(l){e=D(l,"TD",{class:!0});var i=B(e);s=X(i,t),i.forEach(w),this.h()},h(){S(e,"class","svelte-19jtajs")},m(l,i){W(l,e,i),k(e,s)},p:te,d(l){l&&w(e)}}}function Ue(n){let e,t,s=J(n[20]),l=[];for(let i=0;i<s.length;i+=1)l[i]=Pe(Ie(n,s,i));return{c(){e=C("tr");for(let i=0;i<l.length;i+=1)l[i].c();t=A()},l(i){e=D(i,"TR",{});var p=B(e);for(let r=0;r<l.length;r+=1)l[r].l(p);t=P(p),p.forEach(w)},m(i,p){W(i,e,p);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);k(e,t)},p(i,p){if(p&8){s=J(i[20]);let r;for(r=0;r<s.length;r+=1){const h=Ie(i,s,r);l[r]?l[r].p(h,p):(l[r]=Pe(h),l[r].c(),l[r].m(e,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},d(i){i&&w(e),Ke(l,i)}}}function at(n){let e,t,s,l,i,p="Unseeded",r,h,m=[],b=new Map,_,y,f,E="Seeding",v,u=[],N=new Map,U,T,V,G,L,o,c,j,M,R,K,Z,pe='<tr class="headerrow svelte-19jtajs"><td class="svelte-19jtajs">Faster School</td> <td class="svelte-19jtajs">Slower School</td> <td class="svelte-19jtajs">Margin</td> <td class="svelte-19jtajs">Date</td></tr>',_e,$,ie,ge,me,se=J(n[0]);const ye=a=>a[26].id;for(let a=0;a<se.length;a+=1){let g=Oe(n,se,a),d=ye(g);b.set(d,m[a]=Re(d,g))}let le=J(n[1]);const ke=a=>a[26].id;for(let a=0;a<le.length;a+=1){let g=He(n,le,a),d=ke(g);N.set(d,u[a]=qe(d,g))}let q=n[2].length==0&&Le(),H=n[2].length==1&&Ne(n),O=n[2].length==2&&Ae(n),x=J(n[3]),I=[];for(let a=0;a<x.length;a+=1)I[a]=Ue(Ve(n,x,a));return{c(){e=C("div"),t=C("div"),s=C("div"),l=C("div"),i=C("h2"),i.textContent=p,r=A(),h=C("div");for(let a=0;a<m.length;a+=1)m[a].c();_=A(),y=C("div"),f=C("h2"),f.textContent=E,v=A();for(let a=0;a<u.length;a+=1)u[a].c();U=A(),T=C("div"),V=C("div"),q&&q.c(),G=A(),H&&H.c(),L=A(),O&&O.c(),o=A(),c=C("div"),j=C("input"),M=A(),R=C("div"),K=C("table"),Z=C("thead"),Z.innerHTML=pe,_e=A(),$=C("tbody");for(let a=0;a<I.length;a+=1)I[a].c();this.h()},l(a){e=D(a,"DIV",{class:!0,style:!0});var g=B(e);t=D(g,"DIV",{class:!0,style:!0});var d=B(t);s=D(d,"DIV",{class:!0});var Y=B(s);l=D(Y,"DIV",{class:!0});var re=B(l);i=D(re,"H2",{class:!0,"data-svelte-h":!0}),fe(i)!=="svelte-1rh5f2t"&&(i.textContent=p),r=P(re),h=D(re,"DIV",{style:!0});var be=B(h);for(let F=0;F<m.length;F+=1)m[F].l(be);be.forEach(w),re.forEach(w),_=P(Y),y=D(Y,"DIV",{class:!0});var oe=B(y);f=D(oe,"H2",{class:!0,"data-svelte-h":!0}),fe(f)!=="svelte-1ga4heb"&&(f.textContent=E),v=P(oe);for(let F=0;F<u.length;F+=1)u[F].l(oe);oe.forEach(w),Y.forEach(w),d.forEach(w),U=P(g),T=D(g,"DIV",{class:!0});var ae=B(T);V=D(ae,"DIV",{class:!0});var ee=B(V);q&&q.l(ee),G=P(ee),H&&H.l(ee),L=P(ee),O&&O.l(ee),ee.forEach(w),o=P(ae),c=D(ae,"DIV",{class:!0});var ce=B(c);j=D(ce,"INPUT",{placeholder:!0}),M=P(ce),R=D(ce,"DIV",{class:!0,style:!0});var je=B(R);K=D(je,"TABLE",{style:!0});var de=B(K);Z=D(de,"THEAD",{"data-svelte-h":!0}),fe(Z)!=="svelte-iodkgz"&&(Z.innerHTML=pe),_e=P(de),$=D(de,"TBODY",{});var we=B($);for(let F=0;F<I.length;F+=1)I[F].l(we);we.forEach(w),de.forEach(w),je.forEach(w),ce.forEach(w),ae.forEach(w),g.forEach(w),this.h()},h(){S(i,"class","svelte-19jtajs"),z(h,"height","100%"),z(h,"overflow-y","scroll"),S(l,"class","left"),S(f,"class","svelte-19jtajs"),S(y,"class","right"),S(s,"class","board svelte-19jtajs"),S(t,"class","w3-col s4"),z(t,"justify-content","left"),S(V,"class","selectionpane svelte-19jtajs"),S(j,"placeholder","filter"),z(K,"border-collapse","collapse"),S(R,"class","researchtable svelte-19jtajs"),z(R,"height","90%"),S(c,"class","researchpane svelte-19jtajs"),S(T,"class","w3-col s8"),S(e,"class","w3-row-padding w3-margin-bottom toplevel svelte-19jtajs"),z(e,"height","90vh"),z(e,"overflow","hidden")},m(a,g){W(a,e,g),k(e,t),k(t,s),k(s,l),k(l,i),k(l,r),k(l,h);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(h,null);k(s,_),k(s,y),k(y,f),k(y,v);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(y,null);k(e,U),k(e,T),k(T,V),q&&q.m(V,null),k(V,G),H&&H.m(V,null),k(V,L),O&&O.m(V,null),k(T,o),k(T,c),k(c,j),k(c,M),k(c,R),k(R,K),k(K,Z),k(K,_e),k(K,$);for(let d=0;d<I.length;d+=1)I[d]&&I[d].m($,null);ie=!0,ge||(me=[ue(window,"keydown",n[7]),ue(j,"keydown",n[11])],ge=!0)},p(a,[g]){if(g&5){se=J(a[0]),Se();for(let d=0;d<m.length;d+=1)m[d].r();m=Be(m,g,ye,1,a,se,b,h,Te,Re,null,Oe);for(let d=0;d<m.length;d+=1)m[d].a();De()}if(g&6){le=J(a[1]),Se();for(let d=0;d<u.length;d+=1)u[d].r();u=Be(u,g,ke,1,a,le,N,y,Te,qe,null,He);for(let d=0;d<u.length;d+=1)u[d].a();De()}if(a[2].length==0?q||(q=Le(),q.c(),q.m(V,G)):q&&(q.d(1),q=null),a[2].length==1?H?H.p(a,g):(H=Ne(a),H.c(),H.m(V,L)):H&&(H.d(1),H=null),a[2].length==2?O?O.p(a,g):(O=Ae(a),O.c(),O.m(V,null)):O&&(O.d(1),O=null),g&8){x=J(a[3]);let d;for(d=0;d<x.length;d+=1){const Y=Ve(a,x,d);I[d]?I[d].p(Y,g):(I[d]=Ue(Y),I[d].c(),I[d].m($,null))}for(;d<I.length;d+=1)I[d].d(1);I.length=x.length}},i(a){if(!ie){for(let g=0;g<se.length;g+=1)Ee(m[g]);for(let g=0;g<le.length;g+=1)Ee(u[g]);ie=!0}},o(a){for(let g=0;g<m.length;g+=1)Me(m[g]);for(let g=0;g<u.length;g+=1)Me(u[g]);ie=!1},d(a){a&&w(e);for(let g=0;g<m.length;g+=1)m[g].d();for(let g=0;g<u.length;g+=1)u[g].d();q&&q.d(),H&&H.d(),O&&O.d(),Ke(I,a),ge=!1,xe(me)}}}function ct(n,e,t){let{data:s}=e,l=s.races,p=[...s.foundersDay];for(const[o,c]of Object.entries(l)){if(c.heats===void 0){console.log({race:c});continue}for(const j of c.heats)if(j.class==="fours"&&j.gender==="girls"&&j.varsity_index==="1")for(let M=0;M<j.results.length-1;M++)for(let R=M+1;R<j.results.length;R++)p.push([j.results[M].school,j.results[R].school,Math.round(100*(j.results[R].margin_from_winner-j.results[M].margin_from_winner))/100,c.day])}p.sort((o,c)=>(o=o[3],c=c[3],-(o<c?-1:o>c?1:0)));const[r,h]=ot({duration:o=>Math.sqrt(o*200),fallback(o,c){const j=getComputedStyle(o),M=j.transform==="none"?"":j.transform;return{duration:600,easing:rt,css:R=>`
					transform: ${M} scale(${R});
					opacity: ${R}
				`}}});let m=1,_=["Nobles","Groton","Brooks","BB&N","Middlesex","Taft","Cambridge RLS","Choate","Hopkins","Winsor","Frederick Gunn","Miss Porter's","Brewster Academy","Canterbury","Greenwich Academy","Lyme/Old Lyme","St. Mark's","NMH","Berkshire Academy","Newton Country Day","Pomfret"].map(o=>({id:m++,description:o})),y=[],f=[_[0]];function E(o){const c={id:m++,done:!1,seeded:!1,description:o.value};todos=[c,...todos],o.value=""}function v(o,c){return c<=0?o:(o===void 0&&console.error("wat"),[...o.slice(0,c-1),f[0],o[c-1],...o.slice(c+1)])}function u(o,c){return c>=o.length-1?o:[...o.slice(0,c),o[c+1],f[0],...o.slice(c+2)]}function N(o){console.log("moveToSeeding("+JSON.stringify(o)+")");let c={...f[0],seeded:!0},j=_.map(M=>M.id).indexOf(c.id);t(1,y=[...y.slice(0,j),c,...y.slice(j)]),t(0,_=_.filter(M=>M.id!=c.id)),t(2,f=[c])}function U(o){console.log("moveToUnseeded("+JSON.stringify(o)+")");let c={...f[0],seeded:!1},j=y.map(M=>M.id).indexOf(c.id);t(0,_=[..._.slice(0,j),c,..._.slice(j)]),t(1,y=y.filter(M=>M.id!=c.id)),t(2,f=[c])}function T(o){if(![38,40,37,39].includes(o.keyCode)){console.log(o.keyCode);return}if(o.preventDefault(),o.repeat||f.length!=1)return;let c=_.map(j=>j.id).indexOf(f[0].id);if(c<0)switch(c=y.map(j=>j.id).indexOf(f[0].id),o.keyCode){case 38:t(1,y=v(y,c));break;case 40:t(1,y=u(y,c));break;case 37:U(f[0]);break}else switch(o.keyCode){case 38:t(0,_=v(_,c));break;case 40:t(0,_=u(_,c));break;case 37:break;case 39:N(f[0]);break}}const V=(o,c)=>{c.shiftKey?t(2,f=[f[0],o]):t(2,f=[o])},G=(o,c)=>{c.shiftKey?t(2,f=[f[0],o]):t(2,f=[o])},L=o=>o.key==="Enter"&&E(o.target);return n.$$set=o=>{"data"in o&&t(8,s=o.data)},[_,y,f,p,r,h,E,T,s,V,G,L]}class ut extends nt{constructor(e){super(),it(this,e,ct,at,$e,{data:8})}}export{ut as component};
